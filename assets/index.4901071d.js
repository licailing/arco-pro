import{d as y,j as h,aI as e,bc as a,bi as d}from"./arco.aca93ce0.js";import{B,T as p,f as g}from"./index.0e8c6aef.js";import"./chart.4da6b461.js";import"./vue.7ac8ed9f.js";const E=y({name:"Admin",setup(D){const u=h({}),s=async r=>{console.log("fetchRole",r);const t=await g.get("/api/role/all");return(t==null?void 0:t.data)||[]},n=[{title:"ID",dataIndex:"uid",hideInForm:!0,sortable:{sortDirections:["ascend","descend"]}},{title:"\u7528\u6237\u540D",dataIndex:"username",width:180,ellipsis:!0,copyable:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}]}},{title:"\u771F\u5B9E\u59D3\u540D",dataIndex:"realname",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u771F\u5B9E\u59D3\u540D"}]}},{title:"\u89D2\u8272",dataIndex:"roleId",valueType:"select",fieldProps:{request:s,valueKey:"roleId",labelKey:"roleName",placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272"}},{title:"\u72B6\u6001",dataIndex:"status",valueEnum:{1:{text:"\u6B63\u5E38",status:"Success"},2:{text:"\u7981\u6B62",status:"Error"}}}],i=[{action:1,alias:"add",path:"/api/admin/update",name:"\u65B0\u589E"},{action:2,alias:"edit",path:"/api/admin/update",name:"\u7F16\u8F91"},{action:2,alias:"delete",path:"/api/admin/delete",name:"\u5220\u9664"}],f=r=>{const{isAdd:t,visible:m,formRef:c}=r;return e(a("a-modal"),{titleAlign:"start",title:t?"\u65B0\u589E":"\u7F16\u8F91",visible:m.value,"onUpdate:visible":l=>m.value=l,draggable:!0,maskClosable:!1,footer:!1},{default:()=>[e(a("a-form"),{ref:c,model:u.value,onSubmit:({values:l,errors:o})=>{o||r.onSubmit(l)}},{default:()=>[e(a("a-form-item"),{label:"\u7528\u6237\u540D",field:"username",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}]},{default:()=>[e(a("a-input"),{placeholder:"\u8BF7\u8F93\u5165",modelValue:u.value.username,"onUpdate:modelValue":l=>u.value.username=l},null)]}),e(a("a-form-item"),{label:"\u771F\u5B9E\u59D3\u540D",field:"realname",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u771F\u5B9E\u59D3\u540D"}]},{default:()=>[e(a("a-input"),{placeholder:"\u8BF7\u586B\u5199\u771F\u5B9E\u59D3\u540D",modelValue:u.value.realname,"onUpdate:modelValue":l=>u.value.realname=l},null)]}),e(a("a-form-item"),{label:"\u89D2\u8272",field:"roleId",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272"}]},{default:()=>[e(a("pro-select"),{request:s,columnKey:"roleId",valueKey:"roleId",labelKey:"roleName",valueOption:!0,modelValue:u.value.roleId,"onUpdate:modelValue":l=>u.value.roleId=l,onChange:(l,o)=>{u.value.roleName=o.roleName},placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272"},null)]}),e(a("a-form-item"),{label:"\u72B6\u6001",field:"status",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u72B6\u6001"}]},{default:()=>[e(a("pro-select"),{options:[{label:"\u6B63\u5E38",value:"1"},{label:"\u7981\u6B62",value:"2"}],modelValue:u.value.status,"onUpdate:modelValue":l=>u.value.status=l,valueKey:"value",labelKey:"label",placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001"},null)]}),!t&&e(a("a-form-item"),null,{default:()=>[d("\u63D0\u793A\uFF1A\u91CD\u7F6E\u5BC6\u7801\u65F6\u586B\u5199")]}),e(a("a-form-item"),{label:"\u5BC6\u7801",field:"password",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801"}]},{default:()=>[e(a("a-input-password"),{maxLength:32,modelValue:u.value.password,"onUpdate:modelValue":l=>u.value.password=l},null)]}),e(a("a-form-item"),{label:"\u91CD\u590D\u5BC6\u7801",field:"repassword",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u91CD\u590D\u5BC6\u7801"},{validator:(l,o)=>new Promise(b=>{const{password:v}=u.value;l&&v!==l&&o("\u91CD\u590D\u5BC6\u7801\u4E0E\u5BC6\u7801\u4E0D\u4E00\u81F4"),b()})}]},{default:()=>[e(a("a-input-password"),{maxLength:32,modelValue:u.value.repassword,"onUpdate:modelValue":l=>u.value.repassword=l},null)]}),e(a("a-form-item"),null,{default:()=>[e(a("a-space"),{align:"end",style:{"justify-content":"flex-end",flex:1}},{default:()=>[e(a("a-button"),{type:"outline",onClick:r.onCancel},{default:()=>[d("\u53D6\u6D88")]}),e(a("a-button"),{type:"primary",htmlType:"submit"},{default:()=>[d("\u63D0\u4EA4")]})]})]})]})]})};return{render:()=>e("div",null,[e(B,{items:["menu.platform","menu.platform.admin"]},null),e(a("a-card"),null,{default:()=>[e(a("a-card"),{title:"\u9ED8\u8BA4\u65B0\u589E/\u7F16\u8F91\u8868\u5355",bordered:!1},{default:()=>[e(p,{rowKey:"uid",url:"/api/admin/list",columns:n,modal:!0,buttons:i,defaultFormData:{status:1},rowSelection:{type:"radio"}},null)]}),e(a("a-card"),{title:"\u81EA\u5B9A\u4E49\u65B0\u589E/\u7F16\u8F91\u8868\u5355",style:{marginTop:"20px"},bordered:!1},{default:()=>[e(p,{rowKey:"uid",url:"/api/admin/list",columns:n,modal:!0,buttons:i,rowSelection:{type:"checkbox",showCheckedAll:!0}},{"modal-form":f})]})]})])}},render(){return this.render()}});export{E as default};
